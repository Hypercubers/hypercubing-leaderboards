{{#> layout.html}}
  {{#*inline "title"}}
    Submit solve
  {{/inline}}
  {{#*inline "content"}}

    <script src="/js/submit-solve.js" type="text/javascript"></script>

    <h1>Submit solve</h1>

    <p>
      Read the <a href="https://hypercubing.xyz/leaderboards/rules/" target="_blank">Hypercubing Leaderboard Submission Rules</a> before submitting
    </p>

    <form id="submit_form" method="post" enctype="multipart/form-data" class="normalize-multipart">
      <div class="grid">
        <div>
          <h2>Event</h2>

          <fieldset id="fieldset_event">
            <label for="puzzle_id">Puzzle</label>
            <select id="puzzle_id" name="puzzle_id">
              <option value="" selected disabled hidden></option>
              {{#each puzzles}}
                <option value="{{this.id}}">{{this.name}}</option>
              {{/each}}
              <option value="">Other</option>
            </select>

            <label for="puzzle_variant">Variant</label>
            <select id="puzzle_variant" name="puzzle_variant">
              <option value="" selected>Default</option>
              {{#each variants}}
                <option value="{{this.id}}">{{this.name}}</option>
              {{/each}}
            </select>
            <small>Visual representation + available moves</small>

            <label for="program_id">Computer program</label>
            <select id="program_id" name="program_id">
              {{#each programs}}
                <option value="{{this.id}}">{{this.name}}</option>
              {{/each}}
            </select>
            <small>Select “N/A” for solves done without using a computer</small>
          </fieldset>

          <h2>Metadata</h2>

          <fieldset id="metadata" class="no-spacing">
            <label for="solve_date">Solve date</label>
            <input type="date" id="solve_date" name="solve_date" required="true" />

            <label for="notes">Notes</label>
            <textarea id="notes" rows="5"></textarea>
            <small>
              If you selected "Other" for puzzle, variant, or program, explain here.
              <br>
              Material non-physical puzzles (e.g., hemimegaminx) should use “Default” variant and “N/A” computer program.

            </small>
          </fieldset>
        </div>

        <div>
          <h2>Speedsolve</h2>


          <fieldset id="fieldset_solve_duration">
            <label for="solve_duration" id="solve_duration_label">Solve duration</label>
            <div class="input-duration-container">
              <input type="text" class="input-duration" id="solve_duration"
                    name="solve_h" aria-label="Hours" autocomplete="off"
                    onfocusout="validateDurationInput(this.parentElement)" />
              <div class="input-duration-unit" aria-hidden="true">h</div>
              <input type="text" class="input-duration"
                    name="solve_m" aria-label="Minutes" autocomplete="off"
                    onfocusout="validateDurationInput(this.parentElement)" />
              <div class="input-duration-unit" aria-hidden="true">m</div>
              <input type="text" class="input-duration"
                    name="solve_s" aria-label="Seconds" autocomplete="off"
                    onfocusout="validateDurationInput(this.parentElement)" />
              <div class="input-duration-unit" aria-hidden="true">s</div>
              <input type="text" class="input-duration"
                    name="solve_cs" aria-label="Centiseconds" autocomplete="off"
                    onfocusout="validateDurationInput(this.parentElement)" />
              <div class="input-duration-unit" aria-hidden="true">cs</div>
            </div>
            <small>Truncate to 0.01 seconds</small>
          </fieldset>

          <fieldset id="fieldset_speed_flags">
            <label for="uses_filters">
              <input type="checkbox" id="uses_filters" name="uses_filters" checked />
              Uses filters
            </label>
            <label for="uses_macros">
              <input type="checkbox" id="uses_macros" name="uses_macros" />
              Uses macros
            </label>
            <label for="average">
              <input type="checkbox" id="average" name="average" />
              Average of 5
            </label>
            <label for="one_handed">
              <input type="checkbox" id="one_handed" name="one_handed" />
              One-handed
            </label>
            <label for="blind">
              <input type="checkbox" id="blind" name="blind" />
              Blindfolded
            </label>
          </fieldset>

          <fieldset id="fieldset_memo_duration">
            <label for="memo_duration">Memorization time (optional)</label>
            <div class="input-duration-container">
              <input type="text" class="input-duration" id="memo_duration"
                    name="memo_h" aria-label="Hours" autocomplete="off"
                    onfocusout="validateDurationInput(this.parentElement)" />
              <div class="input-duration-unit" aria-hidden="true">h</div>
              <input type="text" class="input-duration"
                    name="memo_m" aria-label="Minutes" autocomplete="off"
                    onfocusout="validateDurationInput(this.parentElement)" />
              <div class="input-duration-unit" aria-hidden="true">m</div>
              <input type="text" class="input-duration"
                    name="memo_s" aria-label="Seconds" autocomplete="off"
                    onfocusout="validateDurationInput(this.parentElement)" />
              <div class="input-duration-unit" aria-hidden="true">s</div>
              <input type="text" class="input-duration"
                    name="memo_cs" aria-label="Centiseconds" autocomplete="off"
                    onfocusout="validateDurationInput(this.parentElement)" />
              <div class="input-duration-unit" aria-hidden="true">cs</div>
            </div>
            <small>Truncate to 0.01 seconds</small>
          </fieldset>

          <fieldset id="fieldset_video_link">
            <label for="video_url">Video link</label>
            <input type="url" id="video_url" name="video_url" placeholder="https://www.youtube.com/watch?v=dQw4w9WgXcQ" autocomplete="off" />
          </fieldset>

          <h2>Fewest moves</h2>

          <fieldset id="fieldset_fmc">
            <label for="move_count">Move count <small>(STM)</small></label>
            <input type="number" id="move_count"
                   name="move_count" autocomplete="off"
                   onfocusout="validatePositiveNumericInput(this)" />

            <label for="computer_assisted">
              <input type="checkbox" id="computer_assisted" name="computer_assisted" />
              Computer-assisted
            </label>
          </fieldset>

          <fieldset id="fieldset_log_file">
            <label for="log_file">Log file</label>
            <input type="file" id="log_file" name="log_file" />
            <button role="a" type="button" class="secondary" onclick="removeFile(document.getElementById('log_file'))">
              Remove file
            </button>
          </fieldset>
        </div>
      </div>

      <input type="submit" id="submit" value="Submit solve" />
    </form>

  {{/inline}}
{{/layout.html}}
